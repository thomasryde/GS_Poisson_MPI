rm -f *.o main
mpicc -lm -fopenmp -c main.c -I. -O3 -march=native
mpicc -lm -fopenmp -c alloc3d.c -I. -O3 -march=native
mpicc -lm -fopenmp -c Checks.c -I. -O3 -march=native
mpicc -lm -fopenmp -c InitArrays.c -I. -O3 -march=native
mpicc -lm -fopenmp -o main main.o alloc3d.o Checks.o InitArrays.o 
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 100 100 0 1 2>&1 > data/100_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 100 100 0 1 2>&1 > data/100_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 99 100 0 1 2>&1 > data/99_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 100 100 0 1 2>&1 > data/100_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 100 100 0 1 2>&1 > data/100_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 96 100 0 1 2>&1 > data/96_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 98 100 0 1 2>&1 > data/98_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 96 100 0 1 2>&1 > data/96_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 99 100 0 1 2>&1 > data/99_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 100 100 0 1 2>&1 > data/100_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 500 20 0 1 2>&1 > data/500_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 500 20 0 1 2>&1 > data/500_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 498 20 0 1 2>&1 > data/498_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 500 20 0 1 2>&1 > data/500_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 500 20 0 1 2>&1 > data/500_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 498 20 0 1 2>&1 > data/498_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 497 20 0 1 2>&1 > data/497_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 496 20 0 1 2>&1 > data/496_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 495 20 0 1 2>&1 > data/495_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 500 20 0 1 2>&1 > data/500_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 999 5 0 1 2>&1 > data/999_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 996 5 0 1 2>&1 > data/996_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 994 5 0 1 2>&1 > data/994_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 999 5 0 1 2>&1 > data/999_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1000 5 0 1 2>&1 > data/1000_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1498 5 0 1 2>&1 > data/1498_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1496 5 0 1 2>&1 > data/1496_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1494 5 0 1 2>&1 > data/1494_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1500 5 0 1 2>&1 > data/1500_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1998 5 0 1 2>&1 > data/1998_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1998 5 0 1 2>&1 > data/1998_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1995 5 0 1 2>&1 > data/1995_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 1998 5 0 1 2>&1 > data/1998_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2000 5 0 1 2>&1 > data/2000_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2500 5 0 1 2>&1 > data/2500_p1_1
mpirun -np 4 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2500 5 0 1 2>&1 > data/2500_p4_1
mpirun -np 9 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2499 5 0 1 2>&1 > data/2499_p9_1
mpirun -np 16 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2500 5 0 1 2>&1 > data/2500_p16_1
mpirun -np 25 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2500 5 0 1 2>&1 > data/2500_p25_1
mpirun -np 36 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2496 5 0 1 2>&1 > data/2496_p36_1
mpirun -np 49 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2499 5 0 1 2>&1 > data/2499_p49_1
mpirun -np 64 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2496 5 0 1 2>&1 > data/2496_p64_1
mpirun -np 81 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2493 5 0 1 2>&1 > data/2493_p81_1
mpirun -np 100 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 2500 5 0 1 2>&1 > data/2500_p100_1
mpirun -np 1 --map-by dist:span --mca rmaps_dist_device ib0 --report-bindings ./main 3000 5 0 1 2>&1 > data/3000_p1_1
Exitting before done!!!

------------------------------------------------------------
Sender: LSF System <lsfadmin@hpc.dtu.dk>
Subject: Job 9614582: <profiling> in cluster <dcc> Exited

Job <profiling> was submitted from host <n-62-30-8> by user <s174503> in cluster <dcc> at Tue May  4 15:00:35 2021
Job was executed on host(s) <24*n-62-21-75>, in queue <hpcintro>, as user <s174503> in cluster <dcc> at Tue May  4 15:52:45 2021
                            <24*n-62-21-77>
                            <24*n-62-21-78>
                            <24*n-62-21-76>
                            <24*n-62-21-74>
</zhome/fd/6/127382> was used as the home directory.
</zhome/fd/6/127382/Desktop/LargeScaleMod/GS_Poisson_MPI> was used as the working directory.
Started at Tue May  4 15:52:45 2021
Terminated at Tue May  4 16:17:50 2021
Results reported at Tue May  4 16:17:50 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
# --- specify queue
#BSUB -q hpcintro
# --- asking for number of cores
#BSUB -n 120
# --- reserving N cores on each machine up to the total number cores requested
#BSUB -R "span[block=24]"
# --- Wall time
#BSUB -W 00:59
# --- Specify that we need X GB of memory per core/slot
#BSUB -R "rusage[mem=10GB]"
#BSUB -J profiling
#BSUB -e Error_%J.err

module purge
module load mpi/3.1.3-gcc-8.2.0

# do a clean build to ensure everything is updated
make clean
make CFLAGS="-O3 -march=native"

tol=0

# Loop matrix size
for N_n in 100 500 1000 1500 2000 2500 3000 3500 4000 # end where? decrease number of runs?
do

if [[ $N_n -lt 200 ]]
then
    iter=100
elif [[ $N_n -lt 1000 ]]
then
    iter=20
else
    iter=5
fi

# Loop px
all_p="1 4 8 16 25 36 49 64 81 100" # start at 1? end at 100?
all_p_sqr="1 2 3 4 5 6 7 8 9 10"    # squared number of processes
for p_n in $all_p_sqr ; do

N=$(($N_n-($N_n%$p_n)))
p=$(($p_n*$p_n))

# skip calculations with more processors than available
[ $p -gt $LSB_DJOB_NUMPROC ] && continue

# adjust here for the different algorithms
all_algo="1"

(... more ...)
------------------------------------------------------------

Exited with exit code 1.

Resource usage summary:

    CPU time :                                   40883.50 sec.
    Max Memory :                                 240358 MB
    Average Memory :                             94958.58 MB
    Total Requested Memory :                     1228800.00 MB
    Delta Memory :                               988442.00 MB
    Max Swap :                                   127 MB
    Max Processes :                              28
    Max Threads :                                81
    Run time :                                   1505 sec.
    Turnaround time :                            4635 sec.

The output (if any) is above this job summary.



PS:

Read file <Error_9614582.err> for stderr output of this job.

